<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>סדרות חשבוניות (מבוא) | סדרות | שאלון 35182</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css" integrity="sha384-n8MVd4RsNIU0tAv4ct0nTaAbDJwPJzDEaqSD1odI+WdtXRGWt2kTvGFasHpSy3SV" crossorigin="anonymous">
    <link href="https://fonts.googleapis.com/css2?family=Assistant:wght@400;600;700&display=swap" rel="stylesheet"> 
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js" integrity="sha384-XjKyOOlGwcjNTAIQHIpgOno0Hl1YQqzUOEleOLALmuqehneUG+vnGctmUb0ZY0l8" crossorigin="anonymous"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js" integrity="sha384-+VBxd3r6XgURycqtZ117nYw44OOcIax56Z4dCRWbxyPt0Koah1uHoK0o4+/RRE05" crossorigin="anonymous"></script>
    <style>
        body {
            font-family: 'Assistant', 'Arial', sans-serif; 
            line-height: 1.7;
        }
        .formula-box {
            background-color: #F3F4F6; 
            padding: 0.5rem 0.75rem; 
            border-radius: 0.375rem;
            display: inline-block; 
            font-size: 1.15em; 
            line-height: 1.6; 
            border: 1px solid #E5E7EB; 
            margin: 0.25rem 0;
        }
        .formula-box[dir="ltr"] .katex {
            text-align: left !important; 
        }
        #notification-box {
            transition: opacity 0.5s ease-in-out;
        }
        .example-box { 
            border: 1px solid #DBEAFE; 
            background-color: #EFF6FF; 
            padding: 1rem;
            border-radius: 0.5rem;
            margin-top: 1rem;
        }
        .solution .example-box { /* For solutions within practice */
             background-color: #F0FDF4;
             border-color: #A7F3D0;
        }
        .sub-section { margin-top: 1.5rem; }
        .sequence-display {
            font-family: 'Courier New', Courier, monospace;
            font-size: 1.2em;
            letter-spacing: 2px;
            padding: 0.5rem;
            background-color: #E0E7FF; /* indigo-100 */
            border: 1px solid #C7D2FE; /* indigo-200 */
            border-radius: 0.25rem;
            text-align: center;
            margin: 0.5rem auto;
            display: inline-block;
        }
        .intro-hanukkah {
            background-color: #FFFBEB; /* yellow-50 */
            border: 1px solid #FEF3C7; /* yellow-200 */
            padding: 1.5rem;
            border-radius: 0.5rem;
            margin-bottom: 2rem;
        }
        .intro-hanukkah h3 {
            color: #B45309; /* amber-700 */
            font-weight: 600;
            margin-bottom: 0.75rem;
        }
    </style>
</head>
<body class="bg-gray-100 text-gray-800">

    <div id="notification-box" class="fixed top-5 right-5 text-white p-4 rounded-lg shadow-xl hidden z-50 max-w-sm text-right">
        הודעה תוצג כאן
    </div>

    <div class="container mx-auto p-4 md:p-8">
        <header class="mb-8">
            <nav aria-label="breadcrumb" class="text-sm text-gray-600 mb-2">
                <ol class="list-none p-0 inline-flex">
                    <li class="flex items-center">
                        <a href="index.html" class="hover:underline">דף ראשי</a> <svg class="fill-current w-3 h-3 mx-3" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path d="M285.476 272.971L91.132 467.314c-9.373 9.373-24.569 9.373-33.941 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.901L188.505 256 34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569 9.373 33.941 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941z"/></svg>
                    </li>
                    <li class="flex items-center">
                        <a href="questionnaire_35182_toc.html" class="hover:underline">שאלון 35182</a> 
                        <svg class="fill-current w-3 h-3 mx-3" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path d="M285.476 272.971L91.132 467.314c-9.373 9.373-24.569 9.373-33.941 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.901L188.505 256 34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569 9.373 33.941 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941z"/></svg>
                    </li>
                     <li class="flex items-center">
                        <a href="questionnaire_35182_sequences_toc.html" class="hover:underline">סדרות</a> <svg class="fill-current w-3 h-3 mx-3" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path d="M285.476 272.971L91.132 467.314c-9.373 9.373-24.569 9.373-33.941 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.901L188.505 256 34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569 9.373 33.941 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941z"/></svg>
                    </li>
                    <li class="flex items-center">
                        <span class="text-gray-500">סדרות חשבוניות (מבוא)</span>
                    </li>
                </ol>
            </nav>
            <h1 id="lesson-title" class="text-3xl md:text-4xl font-bold text-blue-700">סדרות חשבוניות (מבוא)</h1>
        </header>

        <main class="bg-white p-6 md:p-8 rounded-lg shadow-lg">

            <section id="learn" aria-labelledby="learn-heading" class="mb-12">
                <div class="intro-hanukkah">
                    <h3 class="text-xl">שאלה למחשבה: כמה נרות חנוכה צריך?</h3>
                    <p>בחג החנוכה, אנו מדליקים נרות במשך שמונה ימים. ביום הראשון מדליקים נר אחד (בנוסף לשמש), ביום השני שני נרות, ביום השלישי שלושה, וכן הלאה, עד היום השמיני שבו מדליקים שמונה נרות.</p>
                    <p class="mt-2">אם נרצה לדעת כמה נרות (לא כולל השמש) נצטרך ליום השמיני, נוכל פשוט לספור: 1, 2, 3, 4, 5, 6, 7, <strong>8</strong>. קל לראות שביום השמיני נצטרך 8 נרות.</p>
                    <p class="mt-2">אבל מה אם היינו רוצים לדעת כמה נרות נצטרך ליום ה-20 בחג דמיוני שנמשך הרבה יותר זמן? או ליום ה-100? לספור עד אז יהיה מייגע!</p>
                    <p class="mt-2">כאן נכנסת לתמונה המתמטיקה של <strong>סדרות</strong>. מספר הנרות שאנו מדליקים בכל יום מהווה סדרה:</p>
                    <div class="my-3 text-center">
                        <span class="sequence-display">1, 2, 3, 4, 5, 6, 7, 8</span>
                    </div>
                    <p>זוהי דוגמה לסדרה חשבונית, שבה ההפרש בין כל שני איברים עוקבים הוא קבוע (במקרה זה, ההפרש הוא 1). בהמשך השיעור נלמד נוסחה הנקראת "נוסחת האיבר הכללי", <span class="formula-box" dir="ltr">\(a_n = a_1 + (n-1)d\)</span>, שתעזור לנו למצוא בקלות את מספר הנרות.</p>
                    <p class="mt-2">לדוגמה, עבור היום השמיני של חנוכה:</p>
                    <ul class="list-none space-y-1 pr-5 mt-1">
                        <li>האיבר הראשון <span class="formula-box" dir="ltr">\(a_1 = 1\)</span> (נר אחד ביום הראשון).</li>
                        <li>הפרש הסדרה <span class="formula-box" dir="ltr">\(d = 1\)</span> (כל יום מוסיפים נר אחד).</li>
                        <li>מיקום האיבר שאנו מחפשים <span class="formula-box" dir="ltr">\(n = 8\)</span> (היום השמיני).</li>
                    </ul>
                    <p>נציב בנוסחה:</p>
                    <p class="text-center"><span class="formula-box" dir="ltr">\(a_8 = 1 + (8-1) \cdot 1 = 1 + (7) \cdot 1 = 1 + 7 = 8\)</span></p>
                    <p>ואכן, קיבלנו 8 נרות ליום השמיני, בדיוק כמו בספירה! הנוסחה חוסכת לנו את הספירה הארוכה במקרים מורכבים יותר.</p>
                </div>

                <h2 id="learn-heading-main" class="text-2xl font-semibold text-blue-600 mb-6 border-b-2 border-blue-200 pb-2">מהי סדרה חשבונית?</h2>
                <div class="space-y-6 text-gray-700 leading-relaxed">
                    <p>סדרה היא רשימה מסודרת של מספרים. בסדרה חשבונית, ההפרש בין כל שני איברים עוקבים הוא קבוע. הפרש קבוע זה נקרא <strong>הפרש הסדרה</strong> ומסומן באות <span dir="ltr">\(d\)</span>.</p>
                    
                    <div class="sub-section">
                        <h3 class="text-xl font-semibold mt-4 mb-2 text-blue-600">מושגי יסוד בסדרה חשבונית:</h3>
                        <ul class="list-disc list-inside space-y-1 pr-5">
                            <li><strong>האיבר הראשון (<span dir="ltr">\(a_1\)</span>):</strong> האיבר הפותח את הסדרה.</li>
                            <li><strong>הפרש הסדרה (<span dir="ltr">\(d\)</span>):</strong> המספר הקבוע שמוסיפים (או מחסירים) כדי לעבור מאיבר לאיבר הבא אחריו.
                                <br>אם <span dir="ltr">\(d > 0\)</span>, הסדרה עולה. אם <span dir="ltr">\(d < 0\)</span>, הסדרה יורדת. אם <span dir="ltr">\(d = 0\)</span>, הסדרה קבועה.
                            </li>
                            <li><strong>מספר האיברים (<span dir="ltr">\(n\)</span>):</strong> כמה איברים יש בסדרה.</li>
                            <li><strong>האיבר ה-n-י (<span dir="ltr">\(a_n\)</span>):</strong> האיבר הנמצא במקום ה-<span dir="ltr">\(n\)</span> בסדרה.</li>
                        </ul>
                        <p class="mt-2">דוגמאות לסדרות חשבוניות:</p>
                        <ul class="list-none space-y-1 pr-5 mt-1">
                            <li><span class="sequence-display">2, 5, 8, 11, 14, ...</span> (כאן <span class="formula-box" dir="ltr">\(a_1=2, d=3\)</span>)</li>
                            <li><span class="sequence-display">10, 8, 6, 4, 2, ...</span> (כאן <span class="formula-box" dir="ltr">\(a_1=10, d=-2\)</span>)</li>
                            <li><span class="sequence-display">7, 7, 7, 7, ...</span> (כאן <span class="formula-box" dir="ltr">\(a_1=7, d=0\)</span>)</li>
                        </ul>
                    </div>

                    <div class="sub-section">
                        <h3 class="text-xl font-semibold mt-4 mb-2 text-blue-600">נוסחת האיבר הכללי</h3>
                        <p>כדי למצוא את ערכו של איבר כלשהו בסדרה חשבונית (<span dir="ltr">\(a_n\)</span>) מבלי לרשום את כל האיברים שלפניו, משתמשים בנוסחת האיבר הכללי:</p>
                        <div class="my-4 text-center">
                            <span class="formula-box" dir="ltr">\(a_n = a_1 + (n-1)d\)</span>
                        </div>
                        <p>כאשר:</p>
                        <ul class="list-disc list-inside space-y-1 pr-5">
                            <li><span dir="ltr">\(a_n\)</span> הוא האיבר במקום ה-<span dir="ltr">\(n\)</span>.</li>
                            <li><span dir="ltr">\(a_1\)</span> הוא האיבר הראשון.</li>
                            <li><span dir="ltr">\(n\)</span> הוא מיקום האיבר בסדרה (מספר טבעי).</li>
                            <li><span dir="ltr">\(d\)</span> הוא הפרש הסדרה.</li>
                        </ul>
                    </div>
                    
                    <div class="example-box">
                        <h4 class="text-lg font-semibold mb-1">דוגמה פתורה (מציאת איבר בסדרה, מתוך חומר הבחינה):</h4>
                        <p class="font-medium">שאלה: בסדרה חשבונית נתון: <span class="formula-box" dir="ltr">\(a_1=5, d=3\)</span>. מצא את <span dir="ltr">\(a_7\)</span> (האיבר השביעי).</p>
                        <p class="mt-2"><strong>פתרון:</strong></p>
                        <p>נתון: <span class="formula-box" dir="ltr">\(a_1=5\)</span>, <span class="formula-box" dir="ltr">\(d=3\)</span>, ואנו מחפשים את <span dir="ltr">\(a_7\)</span>, כלומר <span class="formula-box" dir="ltr">\(n=7\)</span>.</p>
                        <p>נציב בנוסחת האיבר הכללי <span class="formula-box" dir="ltr">\(a_n = a_1 + (n-1)d\)</span>:</p>
                        <p><span class="formula-box" dir="ltr">\(a_7 = 5 + (7-1) \cdot 3\)</span></p>
                        <p><span class="formula-box" dir="ltr">\(a_7 = 5 + (6) \cdot 3\)</span></p>
                        <p><span class="formula-box" dir="ltr">\(a_7 = 5 + 18\)</span></p>
                        <p><span class="formula-box" dir="ltr">\(a_7 = 23\)</span></p>
                        <p class="mt-2">האיבר השביעי בסדרה הוא 23.</p>
                    </div>
                </div>
            </section>

            <section id="practice" aria-labelledby="practice-heading" class="mb-12">
                <h2 id="practice-heading" class="text-2xl font-semibold text-blue-600 mb-4 border-b-2 border-blue-200 pb-2">מתרגלים ✍️</h2>
                <div class="space-y-8 mt-6"> 
                    <div class="exercise p-4 border border-gray-300 rounded-lg bg-gray-50">
                        <p class="exercise-question font-medium">תרגיל 1: בסדרה חשבונית האיבר הראשון הוא 4 והפרש הסדרה הוא 6. מהו האיבר החמישי בסדרה?</p>
                        <div class="mt-3">
                            <input type="text" id="ex1-answer" class="border border-gray-300 p-2 rounded w-full md:w-1/2 focus:ring-blue-500 focus:border-blue-500" placeholder="הכנס את האיבר החמישי">
                        </div>
                        <div class="mt-3">
                            <button onclick="checkAnswer('ex1', '28')" class="check-answer-btn bg-blue-500 hover:bg-blue-600 text-white font-semibold py-2 px-4 rounded-md transition duration-150 ease-in-out">בדוק תשובה</button>
                            <button onclick="showSolution('sol1')" class="show-solution-btn bg-gray-500 hover:bg-gray-600 text-white font-semibold py-2 px-4 rounded-md ml-2">הצג פתרון</button>
                        </div>
                        <div id="feedback-ex1" class="feedback hidden"></div>
                        <div id="sol1" class="solution hidden solution-box">
                            <p><strong>פתרון מלא:</strong></p>
                            <p>נתון: <span class="formula-box" dir="ltr">\(a_1=4, d=6, n=5\)</span>.</p>
                            <p><span class="formula-box" dir="ltr">\(a_5 = a_1 + (5-1)d = 4 + (4) \cdot 6 = 4 + 24 = 28\)</span>.</p>
                            <p>האיבר החמישי הוא 28.</p>
                        </div>
                    </div>

                    <div class="exercise p-4 border border-gray-300 rounded-lg bg-gray-50">
                        <p class="exercise-question font-medium">תרגיל 2: בסדרה חשבונית האיבר הראשון הוא 20 והפרש הסדרה הוא <span class="formula-box" dir="ltr">\(-2\)</span>. מהו האיבר העשירי בסדרה?</p>
                         <div class="mt-3">
                            <input type="text" id="ex2-answer" class="border border-gray-300 p-2 rounded w-full md:w-1/2 focus:ring-blue-500 focus:border-blue-500" placeholder="הכנס את האיבר העשירי">
                        </div>
                        <div class="mt-3">
                            <button onclick="checkAnswer('ex2', '2')" class="check-answer-btn bg-blue-500 hover:bg-blue-600 text-white font-semibold py-2 px-4 rounded-md transition duration-150 ease-in-out">בדוק תשובה</button>
                            <button onclick="showSolution('sol2')" class="show-solution-btn bg-gray-500 hover:bg-gray-600 text-white font-semibold py-2 px-4 rounded-md ml-2">הצג פתרון</button>
                        </div>
                        <div id="feedback-ex2" class="feedback hidden"></div>
                        <div id="sol2" class="solution hidden solution-box">
                            <p><strong>פתרון מלא:</strong></p>
                            <p>נתון: <span class="formula-box" dir="ltr">\(a_1=20, d=-2, n=10\)</span>.</p>
                            <p><span class="formula-box" dir="ltr">\(a_{10} = a_1 + (10-1)d = 20 + (9) \cdot (-2) = 20 - 18 = 2\)</span>.</p>
                            <p>האיבר העשירי הוא 2.</p>
                        </div>
                    </div>
                </div>
            </section>

            <section id="test-yourself" aria-labelledby="test-heading" class="mb-12">
                 <h2 id="test-heading" class="text-2xl font-semibold text-blue-600 mb-4 border-b-2 border-blue-200 pb-2">בחן את עצמך 🧐</h2>
                <div class="space-y-6">
                    <div class="quiz-question p-4 border border-gray-300 rounded-lg bg-gray-50">
                        <p class="font-medium">שאלה 1: בסדרה חשבונית <span class="formula-box" dir="ltr">\(a_1=1\)</span> ו-<span class="formula-box" dir="ltr">\(d=4\)</span>. מהו <span class="formula-box" dir="ltr">\(a_3\)</span>?</p>
                        <div class="mt-2 space-y-1">
                            <label class="flex items-center"><input type="radio" name="q1" value="a" class="ml-2"> 5</label>
                            <label class="flex items-center"><input type="radio" name="q1" value="b" class="ml-2"> 8</label>
                            <label class="flex items-center"><input type="radio" name="q1" value="c" class="ml-2"> 9</label>
                            <label class="flex items-center"><input type="radio" name="q1" value="d" class="ml-2"> 13</label>
                        </div>
                    </div>
                    <div class="quiz-question p-4 border border-gray-300 rounded-lg bg-gray-50">
                        <p class="font-medium">שאלה 2: נתונה הסדרה החשבונית: 3, 7, 11, 15, ... מהו הפרש הסדרה (<span dir="ltr">\(d\)</span>)?</p>
                        <div class="mt-2 space-y-1">
                            <label class="flex items-center"><input type="radio" name="q2" value="a" class="ml-2"> 3</label>
                            <label class="flex items-center"><input type="radio" name="q2" value="b" class="ml-2"> 4</label>
                            <label class="flex items-center"><input type="radio" name="q2" value="c" class="ml-2"> 7</label>
                            <label class="flex items-center"><input type="radio" name="q2" value="d" class="ml-2"> 5</label>
                        </div>
                    </div>
                    <button id="submit-quiz" class="bg-green-500 hover:bg-green-600 text-white font-bold py-2 px-4 rounded-md transition duration-150 ease-in-out">הגש בוחן</button>
                    <div id="quiz-results" class="hidden mt-3 p-3 rounded-md text-sm"></div>
                </div>
            </section>

            <section id="progress" aria-labelledby="progress-heading" class="text-center mt-12 py-8">
                 <button id="mark-completed" class="bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 px-6 rounded-lg text-lg shadow-md hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-opacity-50">
                    סמן שיעור כהושלם ✅
                </button>
            </section>
        </main>

        <footer class="text-center text-gray-600 mt-12 py-4 border-t border-gray-300">
            <p>&copy; <span id="current-year"></span> פלטפורמת למידה במתמטיקה. כל הזכויות שמורות.</p>
        </footer>
    </div>

    <script>
        document.addEventListener("DOMContentLoaded", function() {
            renderMathInElement(document.body, { delimiters: [{left: "$$", right: "$$", display: true}, {left: "$", right: "$", display: false}, {left: "\\(", right: "\\)", display: false}, {left: "\\[", right: "\\]", display: true}], throwOnError: false });
            document.getElementById('current-year').textContent = new Date().getFullYear();
            checkLessonStatus();
        });
        
        function showNotification(message, type = 'info', duration = 3000) {
            const notificationBox = document.getElementById('notification-box');
            if (!notificationBox) return;
            notificationBox.textContent = message;
            notificationBox.className = 'fixed top-5 right-5 text-white p-4 rounded-lg shadow-xl z-50 max-w-sm text-right'; 
            if (type === 'success') notificationBox.classList.add('bg-green-500');
            else if (type === 'error') notificationBox.classList.add('bg-red-500');
            else notificationBox.classList.add('bg-blue-500');
            notificationBox.classList.remove('hidden');
            notificationBox.style.opacity = 1;
            setTimeout(() => {
                notificationBox.style.opacity = 0;
                setTimeout(() => { notificationBox.classList.add('hidden'); }, 500);
            }, duration);
        }
        
        function checkAnswer(exerciseId, correctAnswer) { 
            const feedbackEl = document.getElementById(`feedback-${exerciseId}`);
            const userAnswer = document.getElementById(`${exerciseId}-answer`).value.trim();
            if (userAnswer === correctAnswer) {
                feedbackEl.textContent = 'נכון מאוד! כל הכבוד! 👍';
                feedbackEl.className = 'feedback mt-3 p-3 rounded-md text-sm bg-green-100 text-green-700';
            } else {
                feedbackEl.textContent = 'תשובה שגויה. נסה שוב או הצג את הפתרון. 🤔';
                feedbackEl.className = 'feedback mt-3 p-3 rounded-md text-sm bg-red-100 text-red-700';
            }
            feedbackEl.classList.remove('hidden');
        }
        
        function showSolution(solutionId) {
            const solutionEl = document.getElementById(solutionId);
            if (solutionEl) solutionEl.classList.toggle('hidden');
        }

        const quizSubmitButton = document.getElementById('submit-quiz');
        if (quizSubmitButton) {
            quizSubmitButton.addEventListener('click', function() {
                let score = 0;
                const totalQuestions = 2;
                const correctAnswers = { q1: 'c', q2: 'b' }; 
                
                const q1Answer = document.querySelector('input[name="q1"]:checked');
                if (q1Answer && q1Answer.value === correctAnswers.q1) score++;
                
                const q2Answer = document.querySelector('input[name="q2"]:checked');
                if (q2Answer && q2Answer.value === correctAnswers.q2) score++;
                
                const resultsEl = document.getElementById('quiz-results');
                resultsEl.innerHTML = `הציון שלך הוא: <strong>${score}</strong> מתוך ${totalQuestions}.`;
                resultsEl.className = 'mt-3 p-3 rounded-md text-sm bg-yellow-100 text-yellow-700';
                resultsEl.classList.remove('hidden');
                
                recordQuizScore(getLessonId(), score, totalQuestions);
                showNotification(`הבוחן הוגש! ציון: ${score}/${totalQuestions}`, 'info');
            });
        }

        function getLessonId() {
            const titleElement = document.getElementById('lesson-title');
            return titleElement ? titleElement.textContent.trim().toLowerCase().replace(/\s+/g, '_').replace(/[^\wא-ת_]+/g, '') : 'unknown_lesson';
        }
        
        const markCompletedButton = document.getElementById('mark-completed');
        if (markCompletedButton) {
            markCompletedButton.addEventListener('click', function() {
                const lessonId = getLessonId(); 
                if (lessonId === 'unknown_lesson') {
                    showNotification("שגיאה: לא ניתן היה לזהות את השיעור לסימון.", "error"); return;
                }
                markLessonAsCompleted(lessonId);
            });
        }

        function markLessonAsCompleted(lessonId) {
            try {
                localStorage.setItem(`lesson_completed_${lessonId}`, 'true');
                showNotification('השיעור סומן כהושלם!', 'success');
                if(markCompletedButton){
                    markCompletedButton.textContent = 'השיעור הושלם 👍';
                    markCompletedButton.classList.remove('bg-indigo-600', 'hover:bg-indigo-700');
                    markCompletedButton.classList.add('bg-green-600', 'cursor-not-allowed');
                    markCompletedButton.disabled = true;
                }
            } catch (e) { console.error("Error accessing localStorage:", e); showNotification("שגיאה בשמירת ההתקדמות.", "error"); }
        }

        function recordQuizScore(lessonId, score, totalQuestions) {
             if (lessonId === 'unknown_lesson') { showNotification("שגיאה: לא ניתן היה לזהות את השיעור לשמירת ציון.", "error"); return; }
            try { localStorage.setItem(`lesson_quiz_score_${lessonId}`, JSON.stringify({score, totalQuestions, date: new Date().toISOString()}));
            } catch (e) { console.error("Error accessing localStorage:", e); showNotification("שגיאה בשמירת ציון הבוחן.", "error");}
        }

        function checkLessonStatus() {
            const lessonId = getLessonId();
            if (lessonId === 'unknown_lesson') return;
            try {
                const isCompleted = localStorage.getItem(`lesson_completed_${lessonId}`);
                if (isCompleted === 'true' && markCompletedButton) {
                    markCompletedButton.textContent = 'השיעור הושלם 👍';
                    markCompletedButton.classList.remove('bg-indigo-600', 'hover:bg-indigo-700');
                    markCompletedButton.classList.add('bg-green-600', 'cursor-not-allowed');
                    markCompletedButton.disabled = true;
                }
            } catch (e) { console.error("Error accessing localStorage:", e); }
        }
    </script>
</body>
</html>
